#!/bin/bash

echo "DELETE\nDELETE\nDELETE!!!"
echo "ctrl+c to NOT DELETE ALL"
read pippo

rm /home/backup/wd.db

sqlite3 /home/backup/wd.db <<EOF
CREATE TABLE humans (
  id INTEGER PRIMARY KEY,
  wiki_id TEXT,
  viaf_id TEXT,
  qnames TEXT,
  qsurnames TEXT,
  name TEXT,
  surname TEXT,
  label TEXT,
  year_of_birth INT,
  year_of_death INT,
  description TEXT,
  occupations TEXT,
  wikipedia_url TEXT,
  nreferences INTEGER
);

CREATE UNIQUE INDEX idx_humans_wid ON humans (wiki_id);
CREATE INDEX idx_humans_viafid ON humans (viaf_id);

CREATE TABLE names (
  id INTEGER PRIMARY KEY,
  human_id INTEGER,
  wiki_id TEXT,
  name TEXT
);

CREATE INDEX idx_names_human ON names (human_id);
CREATE INDEX idx_names_name ON names (name);

CREATE TABLE wditems (
  id INTEGER PRIMARY KEY,
  wiki_id TEXT, 
  labels TEXT
);

CREATE UNIQUE INDEX idx_wditems_wid ON wditems (wiki_id);

CREATE TABLE viafs (
  id INTEGER PRIMARY KEY,
  viaf_id TEXT,
  human_id INTEGER,
  wiki_id TEXT
);

CREATE INDEX idx_viafs_viaf ON viafs (viaf_id);
CREATE INDEX idx_viafs_wiki ON viafs (wiki_id);
CREATE INDEX idx_viafs_human ON viafs (human_id);
EOF
